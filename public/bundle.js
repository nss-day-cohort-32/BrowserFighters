(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

var _test = require("./modules/test");

var _apiCalls = require("./modules/apiCalls");

var _loginPage = require("./modules/loginPage");

var _registerUser = require("./modules/registerUser");

var _friends = require("./modules/friends");

_registerUser.regBtn;
_loginPage.login;
(0, _test.test)();
(0, _friends.friendSearch)();
_friends.searchAddFriend;

_apiCalls.API.getUsers().then(entries => console.log("allUsers", entries));

_apiCalls.API.getOneUser(1).then(entry => console.log("one user", entry));

},{"./modules/apiCalls":2,"./modules/friends":3,"./modules/loginPage":4,"./modules/registerUser":5,"./modules/test":6}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.API = void 0;

/*
    Author: Addam Joor
    Name: apiCalls.js
    Purpose: Handles calls to the database.
*/
const baseUrl = "http://localhost:8088/users";
const API = {
  getUsers: function () {
    return fetch(baseUrl).then(results => results.json());
  },
  getOneUser: function (id) {
    return fetch(`${baseUrl}/${id}`, {
      method: "GET",
      headers: {
        "Content-Type": "application/json"
      }
    }).then(response => response.json());
  },
  registerNewUser: function (newUserObject) {
    return fetch(baseUrl, {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(newUserObject)
    }).then(response => response.json());
  },
  deleteUser: function (userId) {
    return fetch(`${baseUrl}/${userId}`, {
      method: "DELETE",
      headers: {
        "Content-Type": "application/json"
      }
    }).then(response => response.json());
  },
  editUserInfo: function (userId, userObject) {
    return fetch(`${baseUrl}/${userId}`, {
      method: "PUT",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(userObject)
    }).then(response => response.json());
  }
};
exports.API = API;

},{}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.friendSearch = friendSearch;

var _apiCalls = require("./apiCalls");

const friendsEl = document.getElementById("friendsContainer");

function friendSearch() {
  const friendsButton = document.getElementById("addFriendsBtn").addEventListener("click", function (event) {
    const searchFriends = document.createElement("input");
    searchFriends.setAttribute("class", "searchFriend");
    console.log("searchFriends", searchFriends);
    searchFriends.value = "Search Friends";
    document.body.appendChild(searchFriends);
    const searchFriendsButton = document.createElement("button");
    searchFriendsButton.setAttribute("class", "searchFriendsButton");
    searchFriendsButton.textContent = "Search";
    document.body.appendChild(searchFriendsButton);
    searchFriendsButton.addEventListener("click", function (event) {
      _apiCalls.API.getUsers().then(entries => {
        let findFriend;

        for (let i = 0; i < entries.length; i++) {
          const friend = entries[i];

          if (searchFriends.value === friend.user_name) {
            console.log("found matching name");
            findFriend = friend;
            break;
          } else {
            console.log("user not found");
          }
        }

        console.log(findFriend);
        let findfriendHtml = `<h2>${findFriend.user_name}</h2>
                <button>Add Friend</button>`;
        console.log(findfriendHtml);
        friendsEl.innerHTML += findfriendHtml;
      });
    });
  });
}

},{"./apiCalls":2}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.login = void 0;

var _apiCalls = require("./apiCalls");

var _registerUser = require("./registerUser");

/*
    Author: Addam Joor
    Name: loginPage.js
    Purpose: Handles login and registration.
*/
let article = document.querySelector("#article");
let navbar = document.querySelector("nav ul");
let newUserBtn = document.querySelector("#registrationBtn");
let loginBtn = document.querySelector("#login_btn");
let hiddenEmail = document.querySelector("#email");
let hiddenEmailInput = document.querySelector("#emailInput");
let hiddenUsername = document.querySelector("#confirmUsername");
let usernameInput = document.querySelector("#usernameInput");
let hiddenUsernameInput = document.querySelector("#confirmUsernameInput");
let hiddenPass = document.querySelector("#confirmPass");
let passwordInput = document.querySelector("#passwordInput");
let hiddenPassInput = document.querySelector("#confirmPasswordInput");

function isUser(user) {
  if (user.user_name === usernameInput.value && user.password === passwordInput.value) {
    return user;
  }
}

;
const login = loginBtn.addEventListener("click", function () {
  if (hiddenEmailInput.value === "") {
    _apiCalls.API.getUsers().then(users => {
      let current = users.find(user => isUser(user));

      if (current == null) {
        alert("Invalid username or password.");
        usernameInput.value = "";
        passwordInput.value = "";
        usernameInput.focus();
        return;
      }

      ;
      navbar.classList.remove("hide");
      article.classList.add("hide");
      usernameInput.value = "";
      passwordInput.value = "";
      sessionStorage.setItem(`${current.user_name}`, `${current.id}`);
      console.log(`You've logged in as ${current.user_name}`);
    });
  } else if (hiddenEmailInput.value !== "" && hiddenUsernameInput.value === usernameInput.value && hiddenPassInput.value === passwordInput.value) {
    (0, _registerUser.registerUser)();
  }
});
exports.login = login;

},{"./apiCalls":2,"./registerUser":5}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.registerUser = exports.regBtn = void 0;

var _apiCalls = require("./apiCalls");

/*
    Author: Addam Joor
    Name: registerUser.js
    Purpose: Registration form reveal and register new user function.
*/
let newUserBtn = document.querySelector("#registrationBtn");
let hiddenEmail = document.querySelector("#email");
let hiddenEmailInput = document.querySelector("#emailInput");
let hiddenUsername = document.querySelector("#confirmUsername");
let hiddenUsernameInput = document.querySelector("#confirmUsernameInput");
let hiddenPass = document.querySelector("#confirmPass");
let hiddenPassInput = document.querySelector("#confirmPasswordInput");
let loginBtn = document.querySelector("#login_btn");
const regBtn = newUserBtn.addEventListener("click", function () {
  console.log("New User huh?");
  hiddenEmail.classList.remove("hide");
  hiddenUsername.classList.remove("hide");
  hiddenPass.classList.remove("hide");
  newUserBtn.classList.add("hide");
  loginBtn.innerHTML = "Register";
});
exports.regBtn = regBtn;

const registerUser = () => {
  console.log("you've registered a new user");
  const newUser = {
    email_address: hiddenEmailInput.value,
    user_name: usernameInput.value,
    password: passwordInput.value
  };
  hiddenEmailInput.value = "";
  hiddenUsernameInput.value = "";
  hiddenPassInput.value = "";
  hiddenEmail.classList.add("hide");
  hiddenUsername.classList.add("hide");
  hiddenPass.classList.add("hide");
  newUserBtn.classList.remove("hide");
  loginBtn.innerHTML = "Login";

  _apiCalls.API.registerNewUser(newUser).then(() => _apiCalls.API.getUsers().then(users => console.log("new users list", users)));
};

exports.registerUser = registerUser;

},{"./apiCalls":2}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.test = void 0;

const test = function () {
  console.log("Hello, this test function is working modularly.");
};

exports.test = test;

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi9zY3JpcHRzL21haW4uanMiLCIuLi9zY3JpcHRzL21vZHVsZXMvYXBpQ2FsbHMuanMiLCIuLi9zY3JpcHRzL21vZHVsZXMvZnJpZW5kcy5qcyIsIi4uL3NjcmlwdHMvbW9kdWxlcy9sb2dpblBhZ2UuanMiLCIuLi9zY3JpcHRzL21vZHVsZXMvcmVnaXN0ZXJVc2VyLmpzIiwiLi4vc2NyaXB0cy9tb2R1bGVzL3Rlc3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsY0FBSSxRQUFKLEdBQWUsSUFBZixDQUFvQixPQUFPLElBQUksT0FBTyxDQUFDLEdBQVIsQ0FBWSxVQUFaLEVBQXdCLE9BQXhCLENBQS9COztBQUNBLGNBQUksVUFBSixDQUFlLENBQWYsRUFBa0IsSUFBbEIsQ0FBdUIsS0FBSyxJQUFJLE9BQU8sQ0FBQyxHQUFSLENBQVksVUFBWixFQUF3QixLQUF4QixDQUFoQzs7Ozs7Ozs7OztBQ2RBOzs7OztBQU1BLE1BQU0sT0FBTyxHQUFHLDZCQUFoQjtBQUVPLE1BQU0sR0FBRyxHQUFHO0FBQ2YsRUFBQSxRQUFRLEVBQUUsWUFBWTtBQUNsQixXQUFPLEtBQUssQ0FBQyxPQUFELENBQUwsQ0FBZSxJQUFmLENBQW9CLE9BQU8sSUFBSSxPQUFPLENBQUMsSUFBUixFQUEvQixDQUFQO0FBQ0gsR0FIYztBQUlmLEVBQUEsVUFBVSxFQUFFLFVBQVUsRUFBVixFQUFjO0FBQ3RCLFdBQU8sS0FBSyxDQUFFLEdBQUUsT0FBUSxJQUFHLEVBQUcsRUFBbEIsRUFBcUI7QUFDN0IsTUFBQSxNQUFNLEVBQUUsS0FEcUI7QUFFN0IsTUFBQSxPQUFPLEVBQUU7QUFDTCx3QkFBZ0I7QUFEWDtBQUZvQixLQUFyQixDQUFMLENBS0osSUFMSSxDQUtDLFFBQVEsSUFBSSxRQUFR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QUNELENBRk0iLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQge3Rlc3R9IGZyb20gXCIuL21vZHVsZXMvdGVzdFwiO1xyXG5pbXBvcnQge0FQSX0gZnJvbSBcIi4vbW9kdWxlcy9hcGlDYWxsc1wiO1xyXG5pbXBvcnQge2xvZ2lufSBmcm9tIFwiLi9tb2R1bGVzL2xvZ2luUGFnZVwiO1xyXG5pbXBvcnQge3JlZ0J0bn0gZnJvbSBcIi4vbW9kdWxlcy9yZWdpc3RlclVzZXJcIjtcclxuaW1wb3J0IHtmcmllbmRTZWFyY2h9IGZyb20gXCIuL21vZHVsZXMvZnJpZW5kc1wiO1xyXG5pbXBvcnQge3NlYXJjaEFkZEZyaWVuZH0gZnJvbSBcIi4vbW9kdWxlcy9mcmllbmRzXCI7XHJcblxyXG5yZWdCdG47XHJcbmxvZ2luO1xyXG50ZXN0KCk7XHJcbmZyaWVuZFNlYXJjaCgpO1xyXG5zZWFyY2hBZGRGcmllbmQ7XHJcblxyXG5BUEkuZ2V0VXNlcnMoKS50aGVuKGVudHJpZXMgPT4gY29uc29sZS5sb2coXCJhbGxVc2Vyc1wiLCBlbnRyaWVzKSk7XHJcbkFQSS5nZXRPbmVVc2VyKDEpLnRoZW4oZW50cnkgPT4gY29uc29sZS5sb2coXCJvbmUgdXNlclwiLCBlbnRyeSkpOyIsIi8qXHJcbiAgICBBdXRob3I6IEFkZGFtIEpvb3JcclxuICAgIE5hbWU6IGFwaUNhbGxzLmpzXHJcbiAgICBQdXJwb3NlOiBIYW5kbGVzIGNhbGxzIHRvIHRoZSBkYXRhYmFzZS5cclxuKi9cclxuXHJcbmNvbnN0IGJhc2VVcmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC91c2Vyc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IEFQSSA9IHtcclxuICAgIGdldFVzZXJzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGJhc2VVcmwpLnRoZW4ocmVzdWx0cyA9PiByZXN1bHRzLmpzb24oKSk7XHJcbiAgICB9LFxyXG4gICAgZ2V0T25lVXNlcjogZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke2Jhc2VVcmx9LyR7aWR9YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSk7XHJcbiAgICB9LFxyXG4gICAgcmVnaXN0ZXJOZXdVc2VyOiBmdW5jdGlvbiAobmV3VXNlck9iamVjdCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChiYXNlVXJsLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG5ld1VzZXJPYmplY3QpXHJcbiAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpO1xyXG4gICAgfSxcclxuICAgIGRlbGV0ZVVzZXI6IGZ1bmN0aW9uICh1c2VySWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7YmFzZVVybH0vJHt1c2VySWR9YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSk7XHJcbiAgICB9LFxyXG4gICAgZWRpdFVzZXJJbmZvOiBmdW5jdGlvbiAodXNlcklkLCB1c2VyT2JqZWN0KSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke2Jhc2VVcmx9LyR7dXNlcklkfWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1c2VyT2JqZWN0KVxyXG4gICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKTtcclxuICAgIH1cclxufTtcclxuIiwiaW1wb3J0IHsgQVBJIH0gZnJvbSBcIi4vYXBpQ2FsbHNcIlxyXG5cclxuY29uc3QgZnJpZW5kc0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmcmllbmRzQ29udGFpbmVyXCIpO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZyaWVuZFNlYXJjaCgpIHtcclxuICAgIGNvbnN0IGZyaWVuZHNCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZEZyaWVuZHNCdG5cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG5cclxuICAgICAgICBjb25zdCBzZWFyY2hGcmllbmRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgIHNlYXJjaEZyaWVuZHMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJzZWFyY2hGcmllbmRcIik7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJzZWFyY2hGcmllbmRzXCIsIHNlYXJjaEZyaWVuZHMpXHJcbiAgICAgICAgc2VhcmNoRnJpZW5kcy52YWx1ZSA9IFwiU2VhcmNoIEZyaWVuZHNcIjtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNlYXJjaEZyaWVuZHMpO1xyXG5cclxuICAgICAgICBjb25zdCBzZWFyY2hGcmllbmRzQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKVxyXG5cclxuICAgICAgICBzZWFyY2hGcmllbmRzQnV0dG9uLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwic2VhcmNoRnJpZW5kc0J1dHRvblwiKTtcclxuICAgICAgICBzZWFyY2hGcmllbmRzQnV0dG9uLnRleHRDb250ZW50ID0gXCJTZWFyY2hcIjtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNlYXJjaEZyaWVuZHNCdXR0b24pO1xyXG5cclxuICAgICAgICBzZWFyY2hGcmllbmRzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHJcbiAgICAgICAgICAgIEFQSS5nZXRVc2VycygpLnRoZW4oZW50cmllcyA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGZpbmRGcmllbmRcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZW50cmllcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyaWVuZCA9IGVudHJpZXNbaV1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VhcmNoRnJpZW5kcy52YWx1ZSA9PT0gZnJpZW5kLnVzZXJfbmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImZvdW5kIG1hdGNoaW5nIG5hbWVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmluZEZyaWVuZCA9IGZyaWVuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhayB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidXNlciBub3QgZm91bmRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZmluZEZyaWVuZClcclxuICAgICAgICAgICAgICAgIGxldCBmaW5kZnJpZW5kSHRtbCA9YDxoMj4ke2ZpbmRGcmllbmQudXNlcl9uYW1lfTwvaDI+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uPkFkZCBGcmllbmQ8L2J1dHRvbj5gXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmaW5kZnJpZW5kSHRtbClcclxuXHJcbiAgICAgICAgICAgICAgICBmcmllbmRzRWwuaW5uZXJIVE1MICs9IGZpbmRmcmllbmRIdG1sXHJcblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5cclxuIiwiLypcclxuICAgIEF1dGhvcjogQWRkYW0gSm9vclxyXG4gICAgTmFtZTogbG9naW5QYWdlLmpzXHJcbiAgICBQdXJwb3NlOiBIYW5kbGVzIGxvZ2luIGFuZCByZWdpc3RyYXRpb24uXHJcbiovXHJcblxyXG5pbXBvcnQge0FQSX0gZnJvbSBcIi4vYXBpQ2FsbHNcIjtcclxuaW1wb3J0IHtyZWdpc3RlclVzZXJ9IGZyb20gXCIuL3JlZ2lzdGVyVXNlclwiO1xyXG5cclxubGV0IGFydGljbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FydGljbGVcIik7XHJcbmxldCBuYXZiYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibmF2IHVsXCIpO1xyXG5sZXQgbmV3VXNlckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcmVnaXN0cmF0aW9uQnRuXCIpO1xyXG5sZXQgbG9naW5CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xvZ2luX2J0blwiKTtcclxuXHJcbmxldCBoaWRkZW5FbWFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZW1haWxcIik7XHJcbmxldCBoaWRkZW5FbWFpbElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlbWFpbElucHV0XCIpO1xyXG5cclxubGV0IGhpZGRlblVzZXJuYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb25maXJtVXNlcm5hbWVcIik7XHJcbmxldCB1c2VybmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN1c2VybmFtZUlucHV0XCIpO1xyXG5sZXQgaGlkZGVuVXNlcm5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29uZmlybVVzZXJuYW1lSW5wdXRcIik7XHJcblxyXG5sZXQgaGlkZGVuUGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29uZmlybVBhc3NcIik7XHJcbmxldCBwYXNzd29yZElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwYXNzd29yZElucHV0XCIpO1xyXG5sZXQgaGlkZGVuUGFzc0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb25maXJtUGFzc3dvcmRJbnB1dFwiKTtcclxuXHJcbmZ1bmN0aW9uIGlzVXNlcih1c2VyKSB7XHJcbiAgICBpZiAodXNlci51c2VyX25hbWUgPT09IHVzZXJuYW1lSW5wdXQudmFsdWUgJiYgdXNlci5wYXNzd29yZCA9PT0gcGFzc3dvcmRJbnB1dC52YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB1c2VyO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGxvZ2luID0gbG9naW5CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmIChoaWRkZW5FbWFpbElucHV0LnZhbHVlID09PSBcIlwiKSB7XHJcbiAgICAgICAgQVBJLmdldFVzZXJzKCkudGhlbih1c2VycyA9PiB7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50ID0gdXNlcnMuZmluZCh1c2VyID0+IGlzVXNlcih1c2VyKSk7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiSW52YWxpZCB1c2VybmFtZSBvciBwYXNzd29yZC5cIik7XHJcbiAgICAgICAgICAgICAgICB1c2VybmFtZUlucHV0LnZhbHVlID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkSW5wdXQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgdXNlcm5hbWVJbnB1dC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBuYXZiYXIuY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XHJcbiAgICAgICAgICAgIGFydGljbGUuY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XHJcbiAgICAgICAgICAgIHVzZXJuYW1lSW5wdXQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgICAgICBwYXNzd29yZElucHV0LnZhbHVlID0gXCJcIjtcclxuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShgJHtjdXJyZW50LnVzZXJfbmFtZX1gLCBgJHtjdXJyZW50LmlkfWApO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgWW91J3ZlIGxvZ2dlZCBpbiBhcyAke2N1cnJlbnQudXNlcl9uYW1lfWApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaGlkZGVuRW1haWxJbnB1dC52YWx1ZSAhPT0gXCJcIiAmJiBoaWRkZW5Vc2VybmFtZUlucHV0LnZhbHVlID09PSB1c2VybmFtZUlucHV0LnZhbHVlICYmIGhpZGRlblBhc3NJbnB1dC52YWx1ZSA9PT0gcGFzc3dvcmRJbnB1dC52YWx1ZSkge1xyXG4gICAgICAgIHJlZ2lzdGVyVXNlcigpO1xyXG4gICAgfVxyXG59KTtcclxuIiwiLypcclxuICAgIEF1dGhvcjogQWRkYW0gSm9vclxyXG4gICAgTmFtZTogcmVnaXN0ZXJVc2VyLmpzXHJcbiAgICBQdXJwb3NlOiBSZWdpc3RyYXRpb24gZm9ybSByZXZlYWwgYW5kIHJlZ2lzdGVyIG5ldyB1c2VyIGZ1bmN0aW9uLlxyXG4qL1xyXG5pbXBvcnQge0FQSX0gZnJvbSBcIi4vYXBpQ2FsbHNcIjtcclxuXHJcbmxldCBuZXdVc2VyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNyZWdpc3RyYXRpb25CdG5cIik7XHJcblxyXG5sZXQgaGlkZGVuRW1haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VtYWlsXCIpO1xyXG5sZXQgaGlkZGVuRW1haWxJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZW1haWxJbnB1dFwiKTtcclxubGV0IGhpZGRlblVzZXJuYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb25maXJtVXNlcm5hbWVcIik7XHJcbmxldCBoaWRkZW5Vc2VybmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb25maXJtVXNlcm5hbWVJbnB1dFwiKTtcclxubGV0IGhpZGRlblBhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NvbmZpcm1QYXNzXCIpO1xyXG5sZXQgaGlkZGVuUGFzc0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb25maXJtUGFzc3dvcmRJbnB1dFwiKTtcclxubGV0IGxvZ2luQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsb2dpbl9idG5cIik7XHJcblxyXG5leHBvcnQgY29uc3QgcmVnQnRuID0gbmV3VXNlckJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcclxuICAgIGNvbnNvbGUubG9nKFwiTmV3IFVzZXIgaHVoP1wiKTtcclxuICAgIGhpZGRlbkVtYWlsLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xyXG4gICAgaGlkZGVuVXNlcm5hbWUuY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XHJcbiAgICBoaWRkZW5QYXNzLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xyXG4gICAgbmV3VXNlckJ0bi5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcclxuICAgIGxvZ2luQnRuLmlubmVySFRNTCA9IFwiUmVnaXN0ZXJcIjtcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJVc2VyID0gKCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coXCJ5b3UndmUgcmVnaXN0ZXJlZCBhIG5ldyB1c2VyXCIpO1xyXG4gICAgICAgIGNvbnN0IG5ld1VzZXIgPSB7XHJcbiAgICAgICAgICAgIGVtYWlsX2FkZHJlc3M6IGhpZGRlbkVtYWlsSW5wdXQudmFsdWUsXHJcbiAgICAgICAgICAgIHVzZXJfbmFtZTogdXNlcm5hbWVJbnB1dC52YWx1ZSxcclxuICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkSW5wdXQudmFsdWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIGhpZGRlbkVtYWlsSW5wdXQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIGhpZGRlblVzZXJuYW1lSW5wdXQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIGhpZGRlblBhc3NJbnB1dC52YWx1ZSA9IFwiXCI7XHJcblxyXG4gICAgICAgIGhpZGRlbkVtYWlsLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gICAgICAgIGhpZGRlblVzZXJuYW1lLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gICAgICAgIGhpZGRlblBhc3MuY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XHJcbiAgICAgICAgbmV3VXNlckJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcclxuICAgICAgICBsb2dpbkJ0bi5pbm5lckhUTUwgPSBcIkxvZ2luXCI7XHJcblxyXG4gICAgICAgIEFQSS5yZWdpc3Rlck5ld1VzZXIobmV3VXNlcikudGhlbigoKSA9PiBBUEkuZ2V0VXNlcnMoKS50aGVuKHVzZXJzID0+IGNvbnNvbGUubG9nKFwibmV3IHVzZXJzIGxpc3RcIiwgdXNlcnMpKSk7XHJcbn07IiwiZXhwb3J0IGNvbnN0IHRlc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgY29uc29sZS5sb2coXCJIZWxsbywgdGhpcyB0ZXN0IGZ1bmN0aW9uIGlzIHdvcmtpbmcgbW9kdWxhcmx5LlwiKTtcclxufTtcclxuIl19
